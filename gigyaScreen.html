<html>

	<body>
	

	
		<div id='RAASLogin'></div>
		<div> <span id='ai-login'> </span> </div>
		<div> <span id='ai-login.uid'> </span> </div>
		
		<script>
		
			function onLoginEvent(e){
				if (e.UID){
					console.log("onLoginEvent");
					document.getElementById('ai-login').innerHTML = "<b>Logged In</b>";
					document.getElementById('ai-login.uid').innerHTML = `UID: ${e.UID}`;
				}
			}
			
			function onLogoutEvent(e){
				document.getElementById('ai-login').innerHTML = "<b>Logged out</b>";
				document.getElementById('ai-login.uid').innerHTML = "";
			}
		
			function getQueryVariable(variable) {
				var query = window.location.search.substring(1);
				var vars = query.split('&');
				for (var i = 0; i < vars.length; i++) {
					var pair = vars[i].split('=');
					if (decodeURIComponent(pair[0]) == variable) {
						return decodeURIComponent(pair[1]);
					}
				}					
			}
			
			const apiKey = getQueryVariable('apiKey');
			const screenSet = getQueryVariable('screenSet');
			const startScreen = getQueryVariable('startScreen');
			const lang = getQueryVariable('lang');
			
		
			let gigyaSrc = document.createElement("script");
			gigyaSrc.setAttribute("src", `https://cdns.us1.gigya.com/js/gigya.js?apiKey=${apiKey}`);
			document.body.appendChild(gigyaSrc);
		
			const params = {
				containerID: `RAASLogin`,
				screenSet: screenSet,
				startScreen: startScreen,
				lang: lang
			}  

			onGigyaServiceReady = function () {
				gigya.accounts.showScreenSet(params);
				gigya.accounts.addEventHandlers({
				 onLogin: onLoginEvent,
				 onLogout: onLogoutEvent
				});
				gigya.accounts.getAccountInfo({
					callback: function (cb) {
					onLoginEvent(cb);
					}
				});
			};		
			
		</script>
		
	</body>

</html>